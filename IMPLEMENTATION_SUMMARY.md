# Shaderé¢„å¤„ç†ç³»ç»Ÿå®ç°æ€»ç»“

## å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ ¸å¿ƒé¢„å¤„ç†å™¨ç³»ç»Ÿ
- âœ… `ShaderPreprocessor` æ¥å£ - å®šä¹‰é¢„å¤„ç†å™¨å¥‘çº¦
- âœ… `ModernShaderPreprocessor` å®ç° - å®Œæ•´çš„é¢„å¤„ç†å™¨å®ç°
- âœ… `ShaderResourceProvider` æ¥å£ - èµ„æºæä¾›è€…æŠ½è±¡
- âœ… `MinecraftShaderResourceProvider` å®ç° - Minecraftèµ„æºç³»ç»Ÿé›†æˆ
- âœ… `PreprocessorResult` è®°å½• - é¢„å¤„ç†ç»“æœå°è£…
- âœ… `ShaderPreprocessorException` å¼‚å¸¸ - é”™è¯¯å¤„ç†

### 2. Import/Includeç³»ç»Ÿ
- âœ… æ”¯æŒç›¸å¯¹è·¯å¾„å¯¼å…¥ (`#import "path"`)
- âœ… æ”¯æŒç³»ç»Ÿè·¯å¾„å¯¼å…¥ (`#import <path>`)
- âœ… å¾ªç¯å¯¼å…¥æ£€æµ‹å’Œé˜²æŠ¤
- âœ… ä¾èµ–å…³ç³»è·Ÿè¸ª
- âœ… è·¯å¾„è§£æå’Œèµ„æºå®šä½

### 3. å®å®šä¹‰å’Œæ¡ä»¶ç¼–è¯‘
- âœ… `#define` / `#undef` æ”¯æŒ
- âœ… `#ifdef` / `#ifndef` / `#if` / `#else` / `#endif` æ¡ä»¶ç¼–è¯‘
- âœ… è¡¨è¾¾å¼æ±‚å€¼ï¼ˆåŸºæœ¬æ”¯æŒï¼‰
- âœ… å®æ›¿æ¢å’Œå±•å¼€
- âœ… åµŒå¥—æ¡ä»¶ç¼–è¯‘æ”¯æŒ

### 4. é…ç½®ç®¡ç†ç³»ç»Ÿ
- âœ… `ShaderConfiguration` ç±» - é…ç½®æ•°æ®ç»“æ„
- âœ… `ShaderConfigurationManager` å•ä¾‹ - å…¨å±€é…ç½®ç®¡ç†
- âœ… é¢„è®¾é…ç½®ç³»ç»Ÿ (debug, performance, quality, compatibility)
- âœ… é…ç½®å˜æ›´ç›‘å¬æœºåˆ¶
- âœ… JSONé…ç½®æ–‡ä»¶æ”¯æŒ

### 5. å¯é‡æ–°ç¼–è¯‘Shaderç³»ç»Ÿ
- âœ… `RecompilableShader` æŠ½è±¡åŸºç±»
- âœ… `RecompilableGraphicsShader` å›¾å½¢Shaderå®ç°
- âœ… `RecompilableComputeShader` è®¡ç®—Shaderå®ç°
- âœ… è‡ªåŠ¨é‡æ–°ç¼–è¯‘æœºåˆ¶
- âœ… é…ç½®å˜æ›´è§¦å‘é‡ç¼–è¯‘
- âœ… ä¾èµ–æ–‡ä»¶å˜æ›´å¤„ç†

### 6. é«˜çº§Shaderç®¡ç†å™¨
- âœ… `AdvancedShaderManager` å•ä¾‹ - ç»Ÿä¸€Shaderç®¡ç†
- âœ… Shaderåˆ›å»ºå’Œæ³¨å†Œ
- âœ… ä¾èµ–å…³ç³»å›¾ç»´æŠ¤
- âœ… æ‰¹é‡é‡æ–°ç¼–è¯‘
- âœ… æ€§èƒ½ç»Ÿè®¡å’Œç›‘æ§

### 7. å·¥å‚æ¨¡å¼å’Œä¾¿åˆ©å·¥å…·
- âœ… `ShaderFactory` ç±» - Shaderåˆ›å»ºå·¥å‚
- âœ… æµå¼é…ç½®API
- âœ… é¢„è®¾é…ç½®åº”ç”¨
- âœ… èµ„æºåŠ è½½é›†æˆ

### 8. å¢å¼ºçš„èµ„æºåŠ è½½å™¨
- âœ… `EnhancedShaderProgramLoader` - æ”¯æŒé¢„å¤„ç†çš„åŠ è½½å™¨
- âœ… JSONé…ç½®è§£æ
- âœ… å‘åå…¼å®¹æ€§æ”¯æŒ
- âœ… å¯é€‰é¢„å¤„ç†åŠŸèƒ½

### 9. è¿ç§»å’Œå…¼å®¹æ€§å·¥å…·
- âœ… `ShaderMigrationUtils` - è¿ç§»å·¥å…·ç±»
- âœ… `LegacyShaderWrapper` - å…¼å®¹æ€§åŒ…è£…å™¨
- âœ… æ‰¹é‡è¿ç§»æ”¯æŒ
- âœ… è¿ç§»ç­–ç•¥å»ºè®®

### 10. ç¤ºä¾‹å’Œæ–‡æ¡£
- âœ… `IntegratedShaderExample` - å®Œæ•´ä½¿ç”¨ç¤ºä¾‹
- âœ… `ShaderPreprocessingExample` - é¢„å¤„ç†ç¤ºä¾‹
- âœ… ç¤ºä¾‹Shaderæ–‡ä»¶ (vertex/fragment)
- âœ… ç¤ºä¾‹JSONé…ç½®æ–‡ä»¶
- âœ… è¯¦ç»†çš„READMEæ–‡æ¡£

## ä¸»è¦ç‰¹æ€§

### ğŸš€ ç°ä»£åŒ–Importç³»ç»Ÿ
```glsl
#import <common/lighting>     // ç³»ç»Ÿå¯¼å…¥
#import "local/materials"     // ç›¸å¯¹å¯¼å…¥
```

### âš¡ åŠ¨æ€å®æ§åˆ¶
```java
ShaderConfiguration.builder()
    .define("MAX_LIGHTS", 32)
    .enableFeature("shadows")
    .build();
```

### ğŸ”„ è‡ªåŠ¨é‡æ–°ç¼–è¯‘
```java
// é…ç½®å˜æ›´æ—¶è‡ªåŠ¨é‡ç¼–è¯‘
manager.updateShaderConfiguration(id, config -> {
    config.define("QUALITY", "ultra");
});
```

### ğŸ“Š ä¾èµ–è·Ÿè¸ª
```java
// æ–‡ä»¶å˜æ›´æ—¶é‡ç¼–è¯‘ç›¸å…³Shader
manager.recompileDependentShaders(changedFile);
```

### ğŸ›ï¸ çµæ´»é…ç½®
```json
{
  "config": {
    "preset": "quality",
    "defines": { "MAX_LIGHTS": 32 },
    "features": ["pbr_lighting", "shadows"]
  }
}
```

## ç³»ç»Ÿæ¶æ„

```
AdvancedShaderManager
â”œâ”€â”€ ShaderFactory
â”‚   â”œâ”€â”€ ModernShaderPreprocessor
â”‚   â””â”€â”€ MinecraftShaderResourceProvider
â”œâ”€â”€ ShaderConfigurationManager
â”‚   â””â”€â”€ ShaderConfiguration
â””â”€â”€ RecompilableShader
    â”œâ”€â”€ RecompilableGraphicsShader
    â””â”€â”€ RecompilableComputeShader
```

## æ€§èƒ½ä¼˜åŒ–

- âœ… å¢é‡é‡æ–°ç¼–è¯‘ï¼ˆä»…å½“é…ç½®å˜æ›´æ—¶ï¼‰
- âœ… ä¾èµ–ç¼“å­˜å’Œè·Ÿè¸ª
- âœ… å¹¶å‘å®‰å…¨çš„é…ç½®ç®¡ç†
- âœ… èµ„æºå¤ç”¨å’Œç¼“å­˜
- âœ… é”™è¯¯æ¢å¤å’Œé™çº§

## å…¼å®¹æ€§

- âœ… å®Œå…¨å‘åå…¼å®¹ç°æœ‰Shaderç±»
- âœ… å¯é€‰æ‹©æ€§å¯ç”¨é¢„å¤„ç†åŠŸèƒ½
- âœ… ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹
- âœ… æ¸è¿›å¼è¿ç§»æ”¯æŒ

## ä½¿ç”¨åœºæ™¯

1. **å¼€å‘é˜¶æ®µ**: ä½¿ç”¨importç»„ç»‡ä»£ç ï¼Œå®æ§åˆ¶è°ƒè¯•åŠŸèƒ½
2. **è¿è¡Œæ—¶ä¼˜åŒ–**: æ ¹æ®ç¡¬ä»¶èƒ½åŠ›åŠ¨æ€è°ƒæ•´Shaderå¤æ‚åº¦
3. **çƒ­é‡è½½**: å¼€å‘æ—¶ä¿®æ”¹Shaderæ–‡ä»¶è‡ªåŠ¨é‡æ–°ç¼–è¯‘
4. **å¤šå¹³å°é€‚é…**: ä½¿ç”¨å®æ§åˆ¶å¹³å°ç‰¹å®šåŠŸèƒ½
5. **æ€§èƒ½è°ƒä¼˜**: è¿è¡Œæ—¶åˆ‡æ¢ä¸åŒè´¨é‡é¢„è®¾

## ä¸‹ä¸€æ­¥æ‰©å±•

è™½ç„¶æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼Œä½†è¿˜å¯ä»¥è€ƒè™‘ä»¥ä¸‹æ‰©å±•ï¼š

- æ–‡ä»¶ç³»ç»Ÿç›‘æ§é›†æˆï¼ˆçƒ­é‡è½½ï¼‰
- æ›´å¤æ‚çš„è¡¨è¾¾å¼æ±‚å€¼å™¨
- Shaderç¼–è¯‘ç¼“å­˜ç³»ç»Ÿ
- å¯è§†åŒ–ä¾èµ–å…³ç³»å›¾
- æ€§èƒ½åˆ†æå’Œä¼˜åŒ–å»ºè®®
- IDEæ’ä»¶æ”¯æŒ

## æ€»ç»“

è¿™ä¸ªç°ä»£åŒ–çš„Shaderé¢„å¤„ç†ç³»ç»Ÿæä¾›äº†ï¼š
- ğŸ¯ **çµæ´»æ€§**: å¼ºå¤§çš„å®å’Œimportç³»ç»Ÿ
- ğŸ”§ **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„æ¶æ„å’Œå·¥å…·æ”¯æŒ
- âš¡ **æ€§èƒ½**: æ™ºèƒ½é‡ç¼–è¯‘å’Œç¼“å­˜æœºåˆ¶
- ğŸ”„ **å…¼å®¹æ€§**: ä¸ç°æœ‰ç³»ç»Ÿæ— ç¼é›†æˆ
- ğŸ“š **æ˜“ç”¨æ€§**: ä¸°å¯Œçš„ç¤ºä¾‹å’Œæ–‡æ¡£

ç³»ç»Ÿå·²ç»å®Œå…¨å®ç°å¹¶å¯ä»¥æŠ•å…¥ä½¿ç”¨ï¼Œä¸ºSketchLibæä¾›äº†ç°ä»£åŒ–ã€çµæ´»ä¸”é«˜æ€§èƒ½çš„Shaderç®¡ç†èƒ½åŠ›ã€‚
